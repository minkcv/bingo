<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <style>
        body {
            overflow: hidden;
            margin: 0px;
            background-color: #2c2c2c;
            color: #ffffff;
            font-family: Arial, Helvetica, sans-serif;
        }
        table, tbody, tr {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }
        td {
            border: 1px #777777 solid;
            padding-top: 15px;
            padding-bottom: 15px;
            text-align: center;
        }
        #bingo-get {
            visibility: hidden;
            color: #ff0000;
            font-size: 24pt;
        }
    </style>
    <title>Bingo</title>
</head>
<body>
    <div id="bingo-div">
        
    </div>
    <p id="bingo-get">BINGO</p>
    <button onclick="loadItems()">Load Items</button>
    <input id='shuffle' type="checkbox"/>
    <label for='shuffle'>Shuffle items</label>
    <input id="free-space" type="checkbox"/>
    <label for="free-space">Free Space</label>
    <br/>
    <label for="layout">Layout</label>
    <input id='layout' type="text">
    <br/>
    <label for="premades">Pre-made lists:</label>
    <select id="premades" onchange="usePremade()">
        <option value="custom">Blank</option>
        <option value="eft">Escape from Tarkov</option>
        <option value="ow">Overwatch</option>
        <option value="code">Code</option>
        <option value="vrc">VRChat</option>
    </select>
    <br/>
    <textarea id="data" style="width: 400px; height: 200px;"></textarea>
    <br />
    <label for="transparent-background">Transparent Background (For OBS Browser)</label>
    <input id="transparent-background" type="checkbox" onchange="changeBackground()">
    <p>
        Instructions: Put a list of at least 24 or 25 items (one per line) in the text box above depending on if you want to use the free space. Then click the load items button.<br/>
        If you shuffle you can share your layout text with someone else, just have them uncheck shuffle and paste the layout text in the layout box.<br>
    </p>
    <script>
        function usePremade() {
            var v = document.getElementById('premades').value;
            var text = document.getElementById('data');
            if (v == 'eft') {
                text.innerHTML = `Headshot out of nowhere
Encounter team of more than 2
Chad PvP
Timmy NOOO!
Pick up one thing and extract
100m headshot
Leg Meta
Chicken Nugget (Limbs zeroed)
"Pls no" in VOIP
Kill a hatchling
Make over 300k rubles and get 0 kills in a raid
Scav has insane keys/gear
Die to cheater
Gamma is full of non meds value items
Full auto and die empty
TTV in name
Drop a mag
0 energy, 0 hydration
Backpack falls through floor
Co-op with someone from other faction
Die within first 5 min of raid
Fight at extract
GPU in PC
Betrayed by Ally`;
            }
            if (v == 'ow') {
                text.innerHTML = `"Experiencing some lag"
"Hold W"
Teammate leaves
Res'd while eating
"Report X"
Someone gets blamed
"What are we even doing?"
Rein charges into entire enemy team
Awful microphone noises
Get stunlocked
"use the shield"
Bad calls
Voice comms only at end of round
Side B off stage
"diff"
Ultimate whiffs
"I need healing" in voice chat
Steamrolled
Someone loses it and goes full asshole
Teammate counters you
"X is smurfing"
Xenophobia
Bastion tactics fail spectacularly
Bitching about medals/fire`;
            }
            if (v == 'code') {
                text.innerHTML = `Zero comments in file
Somebody has gone and re-implemented a language feature by hand
Identifier naming convention used incorrectly
Off by one
Dead code
Writing unit tests for code that wasn’t designed to be testable
Unnecessary Boolean Algebra
Unbelievably poor documentation
Feature creep
Conditional operator
Code so bad you have to look up who wrote it
“Humorous” variable names that are only funny to the author
Code only works if you sleep long enough
// this is a dirty hack and should be fixed
Typing things repeatedly instead of iterating
Mysterious commented out code
Someone horribly mangled the Git repo
Misleading indentation
Multithreading gone wrong
Magic numbers
Spend more than 15 minutes turning on the projector
Incorrect use of reference equality
Blatantly incorrect comments
Highly paid CS degree holder does not know how to computer`;
            }
            if (v == 'vrc') {
                text.innerHTML = `Who the f*** is getting votekicked?
Converse with a mute
Someone walks through you
VRC update broke my stuff
Works on my machine
Avatar show and tell
Elitism
Out of batteries
Talk about politics
Mirror dwellers
Talk about drugs
Unruly children
Drama
Mod usage tells
Is that a gamer grill?
Someone crashed
Casually talking about VRC mods
Gang activity
Explaining the menus
NSFW in public
Talk about COVID
Xenophobia
IRL interactions leaking into VR
Somebody's tragic backstory`;
            }
            if (v == 'custom') {
                text.innerHTML = "";
            }
            if (v != 'custom') {
                document.getElementById('free-space').checked = true;
            }

        }
        function changeBackground() {
            var transparentBack = document.getElementById('transparent-background').checked;
            if (transparentBack) {
                document.body.style.backgroundColor = 'rgba(0,0,0,0)';
            } else {
                document.body.style.backgroundColor = '#2c2c2c';
            }
            var tds = document.getElementsByTagName('td');
            for (var i = 0; i < tds.length; i++){
                var td = tds[i]
                if (transparentBack)
                    td.style.backgroundColor = 'rgba(0,0,0,0)';
                else
                td.style.backgroundColor = '#2c2c2c';
            }
        }
        function itemClick(e) {
            var transparentBack = document.getElementById('transparent-background').checked;
            if (e.bingoEnabled)
                if (transparentBack)
                    e.style.backgroundColor = 'rgba(0,0,0,0)';
                else
                    e.style.backgroundColor = '#2c2c2c';
            else {
                e.style.backgroundColor = '#770000';
            }
            e.bingoEnabled = !e.bingoEnabled;
            checkBingo();
        }
        function checkBingo() {
            var t = document.getElementById('bingo-table');
            var bingo = 0;
            // Rows
            for (var i = 0; i < 5; i++) {
                var enabled = 0;
                for (var j = 0; j < 5; j++) {
                    var item = t.rows[i].cells[j];
                    if (item.bingoEnabled)
                        enabled++;
                }
                if (enabled == 5)
                    bingo++;
            }
            // Cols
            for (var i = 0; i < 5; i++) {
                var enabled = 0;
                for (var j = 0; j < 5; j++) {
                    var item = t.rows[j].cells[i];
                    if (item.bingoEnabled)
                        enabled++;
                }
                if (enabled == 5)
                    bingo++;
            }
            // Diag
            var enabled = 0;
            for (var i = 0; i < 5; i++) {
                var item = t.rows[i].cells[i];
                if (item.bingoEnabled)
                    enabled++;
            }
            if (enabled == 5)
                bingo++;
            enabled = 0;
            for (var i = 0; i < 5; i++) {
                var item = t.rows[4 - i].cells[i];
                if (item.bingoEnabled)
                    enabled++;
            }
            if (enabled == 5)
                bingo++;
                
            if (bingo > 0){
                document.getElementById('bingo-get').style.visibility = 'visible';
                document.getElementById('bingo-get').innerHTML = 'BINGO';
                if (bingo > 1)
                document.getElementById('bingo-get').innerHTML = 'BINGO x' + bingo;
            }
            else
                document.getElementById('bingo-get').style.visibility = 'hidden';
        }
        function loadItems() {
            var fs = document.getElementById('free-space').checked;
            document.getElementById('bingo-get').style.visibility = 'hidden';
            var items = [];
            var text = document.getElementById('data').value;
            var lines = text.split('\n');
            lines.forEach((line) => {
                items.push(line);
            });
            var positions = [];
            var shuffle = document.getElementById('shuffle').checked;
            var layout = document.getElementById('layout').value;
            if (layout && !shuffle) {
                positions = layout.split(',');
            }
            else {
                var ordered = [];
                var max = 25;
                if (fs)
                    max = 24;
                for (var i = 0; i < lines.length; i++) {
                    ordered.push(i);
                }
                if (shuffle) {
                    for (var i = 0; i < max; i++){
                        var index = Math.floor(Math.random() * ordered.length);
                        positions.push(ordered[index]);
                        ordered.splice(index, 1);
                    }
                    document.getElementById('layout').value = positions;
                }
                else {
                    positions = ordered;
                }
            }
            var d = document.getElementById('bingo-div');
            if (d.children.length > 0)
                d.removeChild(d.children[0]);
            var t = document.createElement('table');
            t.setAttribute('id', 'bingo-table');
            var tb = document.createElement('tbody');
            for (var i = 0; i < 5; i++) {
                var tr = document.createElement('tr');
                tb.appendChild(tr);
                for (var j = 0; j < 5; j++) {
                    var td = document.createElement('td');
                    var itemText;
                    if (fs && i == 2 && j == 2) {
                        td.bingoEnabled = true;
                        itemText = document.createTextNode('Free Space');
                    }
                    else {
                        td.setAttribute('onclick', 'itemClick(this)');
                        td.bingoEnabled = false;
                        var index = i * 5 + j;
                        if (fs && index > 11)
                            index--;
                        itemText = document.createTextNode(items[positions[index]]);
                    }
                    td.appendChild(itemText);
                    tr.appendChild(td);
                }
            }
            t.appendChild(tb);
            d.appendChild(t);
        }
    </script>
</body>
</html>